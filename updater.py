# -*- coding: utf-8 -*-import sys, requests, time, osfrom PySide6.QtWidgets import *from PySide6.QtCore import QtPASTEBIN_URL = "https://pastebin.com/raw/jYwmELYs"  # Remplace par ton lien pastebin RAWSAVE_FILE = "main.py"class Updater(QWidget):    def __init__(self):        super().__init__()        self.setWindowTitle("Updater")        self.setGeometry(200, 200, 400, 100)        layout = QVBoxLayout()        self.label = QLabel("Telechargement de la mise a jour...")        self.progress = QProgressBar()        self.progress.setAlignment(Qt.AlignCenter)        layout.addWidget(self.label)        layout.addWidget(self.progress)        self.setLayout(layout)        QTimer.singleShot(100, self.download_update)  # lance apres le chargement de l'UI    def download_update(self):        try:            response = requests.get(PASTEBIN_URL, stream=True)            response.raise_for_status()            total = int(response.headers.get("Content-Length", 0))            downloaded = 0            content = ""            # Lecture ligne par ligne avec pause pour limiter a ~1Ko/s            for line in response.iter_lines(decode_unicode=True):                if line:                    content += line + "\n"                    downloaded += len(line.encode("utf-8")) + 1                    percent = int((downloaded / total) * 100) if total else 0                    self.progress.setValue(min(percent, 100))                    QApplication.processEvents()                    time.sleep(0.01)  # limite a peu pres 1Ko/s            with open(SAVE_FILE, "w", encoding="utf-8") as f:                f.write(content)            self.label.setText("Mise a jour terminee !")            self.progress.setValue(100)            QMessageBox.information(self, "Termine", "Mise a jour effectuee avec succes.")            self.close()        except Exception as e:            QMessageBox.critical(self, "Erreur", f"Erreur lors de la mise a jour:\n{str(e)}")            self.close()if __name__ == "__main__":    from PySide6.QtCore import QTimer    app = QApplication(sys.argv)    window = Updater()    window.show()    sys.exit(app.exec())